<!DOCTYPE html>
<html lang="pt-BR">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Redirecionamento</title>
 <!-- Meta Pixel Code -->
 <script>
   !function(f,b,e,v,n,t,s) 
   {if(f.fbq)return;n=f.fbq=function(){n.callMethod? 
   n.callMethod.apply(n,arguments):n.queue.push(arguments)}; 
   if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0'; 
   n.queue=[];t=b.createElement(e);t.async=!0; 
   t.src=v;s=b.getElementsByTagName(e)[0]; 
   s.parentNode.insertBefore(t,s)}(window, document,'script', 
   'https://connect.facebook.net/en_US/fbevents.js'); 
   fbq('init', '1024404363116287'); 
   fbq('track', 'PageView');
 </script>
 <!-- SCRIPTS UTMIFY REMOVIDOS TEMPORARIAMENTE -->
 <style>
   body {
     font-family: Arial, sans-serif;
     margin: 0;
     padding: 0;
     background: #000;
     color: white;
   }
 </style>
</head>
<body>
 <script>
   // Define o link do bot
   const botLink = "https://t.me/CuckzaoGoldbOT";
   
   // Captura os par√¢metros
   const urlParams = new URLSearchParams(window.location.search);
   
   // DEBUG VISUAL
   let debugInfo = `
     <div style="background: black; color: white; padding: 20px; font-family: Arial;">
       <h1>üîç DEBUG REDIRECT</h1>
       <p><strong>URL Completa:</strong><br>${window.location.href}</p>
       <p><strong>Par√¢metros:</strong><br>${window.location.search || '‚ùå NENHUM PAR√ÇMETRO!'}</p>
   `;
   
   // Tenta decodificar fbclid
   try {
     const fbclid = urlParams.get('fbclid');
     if (fbclid) {
       // Tenta v√°rias partes do fbclid
       debugInfo += `<p><strong>FBCLID Original:</strong><br>${fbclid}</p>`;
       
       // Tenta decodificar diferentes partes
       try {
         const parte1 = atob(fbclid.substring(0, 16));
         debugInfo += `<p><strong>Decodificado 1:</strong> ${parte1}</p>`;
       } catch(e) {}
       
       try {
         const parte2 = atob(fbclid.substring(8, 24));
         debugInfo += `<p><strong>Decodificado 2:</strong> ${parte2}</p>`;
       } catch(e) {}
     }
   } catch(e) {
     debugInfo += `<p style="color: red;">Erro ao decodificar: ${e.message}</p>`;
   }
   
   // Procura por QUALQUER par√¢metro customizado
   debugInfo += `<h3>TODOS os par√¢metros encontrados:</h3><ul>`;
   for (let [key, value] of urlParams) {
     debugInfo += `<li><strong>${key}:</strong> ${value}</li>`;
     
     // Se encontrar algo diferente de fbclid, destaca!
     if (key !== 'fbclid') {
       debugInfo += `<li style="background: green; padding: 5px;">‚ö†Ô∏è PAR√ÇMETRO CUSTOMIZADO ENCONTRADO!</li>`;
     }
   }
   debugInfo += `</ul>`;
   
   debugInfo += `
       <p><strong>Veio de:</strong><br>${document.referrer || 'Direto'}</p>
       <p><strong>Hora:</strong> ${new Date().toLocaleString('pt-BR')}</p>
       <hr>
       <p style="color: yellow;">Redirecionando em 5 segundos...</p>
     </div>
   `;
   
   document.body.innerHTML = debugInfo;
   
   // Continua com o redirect ap√≥s 5 segundos
   setTimeout(() => {
     // Se vier s√≥ com fbclid, adiciona UTMs padr√£o
     if (urlParams.has('fbclid') && !urlParams.has('utm_source')) {
       const fbclid = urlParams.get('fbclid');
       urlParams.set('utm_source', 'FB');
       urlParams.set('utm_medium', 'paid');
       urlParams.set('utm_campaign', 'fb-' + fbclid.substring(0, 10));
     }
     
     // Captura QUALQUER par√¢metro que vier
     const paramsToCapture = [
       'utm_source', 'utm_campaign', 'utm_medium', 'utm_content', 'utm_term',
       'fbclid', 'gclid', 'src', 'sck',
       // Adiciona poss√≠veis nomes customizados
       'campaign', 'campanha', 'camp', 'c',
       'origem', 'source', 's',
       'anuncio', 'ad', 'a',
       'conjunto', 'adset', 'as',
       'meu_id', 'id_campanha', 'campaign_id'
     ];
     
     // Monta os par√¢metros
     let telegramParams = [];
     
     paramsToCapture.forEach(param => {
       const value = urlParams.get(param);
       if (value) {
         const paramName = param.replace('_', '-');
         let paramValue = value;
         
         if (paramValue.length > 30) {
           paramValue = paramValue.substring(0, 30);
         }
         
         paramValue = paramValue.replace(/[|{}]/g, '');
         telegramParams.push(`${paramName}-${paramValue}`);
       }
     });
     
     // Monta o link final
     let finalLink = botLink;
     if (telegramParams.length > 0) {
       let startParam = telegramParams.join('_');
       
       if (startParam.length > 60) {
         // Pega os mais importantes
         telegramParams = [];
         ['utm_source', 'utm_campaign', 'fbclid', 'campaign', 'meu_id'].forEach(key => {
           const val = urlParams.get(key);
           if (val) {
             telegramParams.push(`${key}-${val.substring(0, 15)}`);
           }
         });
         startParam = telegramParams.join('_');
       }
       
       finalLink = botLink + '?start=' + startParam;
     }
     
     window.location.href = finalLink;
   }, 5000);
 </script>
</body>
</html>

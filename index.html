<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <script>
  window.pixelId = "688ed480c5bd49c5fd71d99b";
  var a = document.createElement("script");
  a.setAttribute("async", "");
  a.setAttribute("defer", "");
  a.setAttribute("src", "https://cdn.utmify.com.br/scripts/pixel/pixel.js");
  document.head.appendChild(a);
</script>
  <script
  src="https://cdn.utmify.com.br/scripts/utms/latest.js"
  data-utmify-prevent-xcod-sck
  data-utmify-prevent-subids
  async
  defer
></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Redirecionamento</title>
  <!-- Meta Pixel Code -->
  <script>
    !function(f,b,e,v,n,t,s) 
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod? 
    n.callMethod.apply(n,arguments):n.queue.push(arguments)}; 
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0'; 
    n.queue=[];t=b.createElement(e);t.async=!0; 
    t.src=v;s=b.getElementsByTagName(e)[0]; 
    s.parentNode.insertBefore(t,s)}(window, document,'script', 
    'https://connect.facebook.net/en_US/fbevents.js'); 
    fbq('init', '1024404363116287'); 
    fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none" 
    src="https://www.facebook.com/tr?id=1024404363116287&ev=PageView&noscript=1" 
  /></noscript>
  <!-- End Meta Pixel Code -->
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #000;
      color: white;
    }
  </style>
</head>
<body>
  <script>
    // Define o link do bot
    const botLink = "https://t.me/CuckzaoGoldbOT"; // MUDE PARA SEU BOT
    
    // Captura os par√¢metros
    const urlParams = new URLSearchParams(window.location.search);
    
    // DEBUG VISUAL - SEMPRE MOSTRA O QUE CHEGOU
    document.body.innerHTML = `
      <div style="background: black; color: white; padding: 20px; font-family: Arial;">
        <h1>üîç DEBUG REDIRECT</h1>
        <p><strong>URL Completa:</strong><br>${window.location.href}</p>
        <p><strong>Par√¢metros:</strong><br>${window.location.search || '‚ùå NENHUM PAR√ÇMETRO!'}</p>
        <p><strong>Veio de:</strong><br>${document.referrer || 'Direto'}</p>
        <p><strong>Hora:</strong> ${new Date().toLocaleString('pt-BR')}</p>
        <hr>
        <p style="color: yellow;">Redirecionando em 3 segundos...</p>
      </div>
    `;
    
    // Continua com o redirect ap√≥s 3 segundos
    setTimeout(() => {
      // Se vier s√≥ com fbclid, adiciona UTMs padr√£o
      if (urlParams.has('fbclid') && !urlParams.has('utm_source')) {
        urlParams.set('utm_source', 'FB');
        urlParams.set('utm_medium', 'social');
        urlParams.set('utm_campaign', 'facebook-direct');
      }
      
      // Lista de par√¢metros que queremos capturar
      const paramsToCapture = [
        'utm_source',
        'utm_campaign', 
        'utm_medium',
        'utm_content',
        'utm_term',
        'fbclid',
        'gclid',
        'src',
        'sck'
      ];
      
      // Monta os par√¢metros
      let telegramParams = [];
      
      paramsToCapture.forEach(param => {
        const value = urlParams.get(param);
        if (value) {
          const paramName = param.replace('_', '-');
          let paramValue = value;
          
          // Limita tamanhos
          if (param === 'fbclid' && paramValue.length > 20) {
            paramValue = paramValue.substring(0, 20);
          } else if (paramValue.length > 30) {
            paramValue = paramValue.substring(0, 30);
          }
          
          // Remove caracteres problem√°ticos
          paramValue = paramValue.replace(/[|{}]/g, '');
          
          telegramParams.push(`${paramName}-${paramValue}`);
        }
      });
      
      // Monta o link final
      let finalLink = botLink;
      if (telegramParams.length > 0) {
        let startParam = telegramParams.join('_');
        
        // Se ficar muito grande, pega s√≥ os essenciais
        if (startParam.length > 60) {
          telegramParams = [];
          if (urlParams.get('utm_source')) telegramParams.push(`utm-source-${urlParams.get('utm_source')}`);
          if (urlParams.get('utm_campaign')) {
            let campaign = urlParams.get('utm_campaign');
            // Se tem pipe, pega s√≥ o ID
            if (campaign.includes('|')) {
              campaign = campaign.split('|')[1];
            }
            telegramParams.push(`utm-campaign-${campaign.substring(0, 15)}`);
          }
          if (urlParams.get('fbclid')) telegramParams.push(`fbclid-${urlParams.get('fbclid').substring(0, 15)}`);
          startParam = telegramParams.join('_');
        }
        
        finalLink = botLink + '?start=' + startParam;
      }
      
      // REDIRECIONA
      window.location.href = finalLink;
    }, 3000);
  </script>
</body>
</html>
